# Progress Program v0.3.1 상세 수정 계획서

## 📋 현재 확인된 문제점 분석

### 1. 마감일 더블클릭 수정 기능 미구현 문제

**현재 상태:**
- `task_widget.py`의 127번 줄에서 마감일 컬럼이 편집 불가로 설정됨
  ```python
  due_date_item.setFlags(due_date_item.flags() & ~Qt.ItemIsEditable)
  ```
- `start_inline_editing` 메서드에서 할 일 제목 컬럼(인덱스 2)만 편집 허용

**발생 원인:**
- 마감일은 복잡한 날짜/시간 선택기가 필요하므로 단순 텍스트 편집으로는 부적절
- 현재는 "📅" 버튼을 통해서만 마감일 설정 가능

**해결 방안:**
1. 마감일 컬럼 더블클릭 시 `DueDateDialog` 자동 호출 기능 추가
2. `start_inline_editing` 메서드에 마감일 컬럼(인덱스 3) 처리 로직 추가
3. 사용자 편의성 향상을 위한 키보드 단축키 추가 고려

---

### 2. 다크모드 메뉴바 시인성 문제

**현재 상태:**
- `theme_manager.py`의 다크 테마에서 메뉴바(QMenuBar) 및 메뉴(QMenu) 스타일 누락
- 메뉴 텍스트가 배경색과 유사하여 식별 어려움

**발생 원인:**
- 다크 테마 CSS에 `QMenuBar`, `QMenu`, `QMenuBar::item` 등 메뉴 관련 스타일 정의 누락
- 시스템 기본 메뉴 스타일이 라이트 테마 기준으로 적용됨

**구체적 수정 방안:**
```css
QMenuBar {
    background-color: #2b2b2b;
    color: #ffffff;
    border-bottom: 1px solid #555;
}
QMenuBar::item {
    background-color: transparent;
    color: #ffffff;
    padding: 8px 12px;
}
QMenuBar::item:selected {
    background-color: #404040;
    color: #4CAF50;
}
QMenu {
    background-color: #3c3c3c;
    color: #ffffff;
    border: 1px solid #555;
}
QMenu::item {
    background-color: transparent;
    color: #ffffff;
    padding: 6px 20px;
}
QMenu::item:selected {
    background-color: #404040;
    color: #4CAF50;
}
```

---

### 3. 시간 표시 형식 문제

**현재 상태:**
- 문제 보고: "순서의 시간 표시가 2025-07-03 10:00:00 형식"
- 실제 코드 확인 결과:
  - 마감일: `format_datetime(task.due_date, "%m/%d %H:%M")` (120번 줄)
  - 생성일: `format_datetime(task.created_date, "%m/%d %H:%M")` (140번 줄)

**원인 분석:**
- "순서" 컬럼의 시간 표시 문제가 아닌 다른 위치의 시간 표시 문제로 추정
- `helpers.py`의 `format_datetime` 기본 포맷이 `"%Y-%m-%d %H:%M"`임
- 코드에서 명시적 포맷 지정 없이 사용하는 곳이 있을 가능성

**해결 방안:**
1. 전체 코드베이스에서 `format_datetime` 사용처 검토
2. 일관된 시간 표시 형식 적용 (시/분만 표시, 초 제거)
3. 사용자 보고 위치 정확히 파악 후 수정

---

### 4. 완료된 할 일 아이콘 부적절 문제

**현재 상태:**
- `task_widget.py` 249번 줄: `self.toggle_completed_btn.setText("👁️ 완료된 할 일 보이기")`
- 사용자가 눈동자 모양(👁️) 아이콘에 불쾌감 표시

**발생 원인:**
- 눈동자 아이콘이 감시당하는 느낌을 주어 심리적 불편함 야기
- 기능과 아이콘의 직관적 연결성 부족

**개선 방안:**
1. **1차 후보 아이콘들:**
   - `🔍` (돋보기): 보기/찾기 기능 연상
   - `📋` (클립보드): 할 일 목록 연상  
   - `✨` (반짝임): 완료된 것들의 성취감 표현
   - `📝` (메모): 할 일 관리 연상

2. **권장 아이콘:** `🔍`
   - 보기/찾기 기능과 직관적 연결
   - "완료된 할 일 찾아보기" 의미로 자연스러움
   - 돋보기 아이콘으로 검색/조회 기능 명확히 표현

---

### 5. 백업/복원 기능 비활성화 문제

**현재 상태:**
- `backup_manager.py`: 205줄의 완전한 백업/복원 로직 구현 완료
- `backup_dialog.py`: 백업 다이얼로그 UI 구현 완료
- `main_window.py`에서 백업 관련 코드들이 모두 주석 처리됨

**주석 처리된 코드 위치:**
```python
# 18번 줄: from utils.backup_manager import BackupManager
# 19번 줄: from ui.backup_dialog import BackupDialog
# 30번 줄: self.backup_manager = BackupManager(self.db.db_path)
# 156-159번 줄: 백업/복원 메뉴 액션
# 223-226번 줄: show_backup_dialog 메서드
```

**발생 원인:**
- 개발 중 테스트를 위해 임시로 주석 처리된 상태로 추정
- 백엔드 로직은 완성되었지만 UI 통합이 최종 단계에서 비활성화됨
- v0.3.0 릴리즈 시 실수로 주석 상태 그대로 배포

**해결 방안:**
1. **주석 제거 작업** (30분):
   - import 문 주석 해제
   - 백업 매니저 초기화 주석 해제
   - 메뉴 액션 주석 해제
   - 메서드 구현부 주석 해제

2. **기능 테스트** (1시간):
   - 백업 생성 기능 테스트
   - 백업 복원 기능 테스트
   - 백업 파일 관리 기능 테스트
   - 오류 처리 테스트

---

### 6. 마감일 설정 버튼 시인성 문제

**현재 상태:**
- `task_widget.py`에서 마감일 설정 버튼이 "📅" 이모지로 표시됨
- 액션 버튼 컬럼의 폭이 너무 좁아서 버튼들이 제대로 식별되지 않음
- 사용자가 마감일 설정 기능을 찾기 어려움

**발생 원인:**
- 테이블 컬럼 너비 설정이 `ResizeToContents`로 되어 있어 최소 크기로 축소됨
- 이모지 버튼들이 작은 크기(30x30)로 설정되어 있어 시각적으로 구분 어려움
- 액션 버튼들 간의 간격이 부족하여 밀집되어 보임

**해결 방안:**
1. **컬럼 너비 조정** (30분):
   - 액션 컬럼 최소 너비 설정 (예: 120px)
   - 버튼 크기 조정 (35x35 또는 40x40)

2. **버튼 레이아웃 개선** (30분):
   - 버튼 간 간격 조정
   - 툴팁 텍스트 개선
   - 버튼 배경색 또는 테두리 추가로 시인성 향상

3. **대체 아이콘 고려** (선택사항):
   - 📅 → 🗓️ (더 명확한 달력 아이콘)
   - 또는 텍스트 버튼 병행 사용

---

## 🔧 v0.3.1 수정 우선순위 및 일정

### 1단계 (즉시 수정 - 1-2일)
1. **완료된 할 일 아이콘 변경** ⭐ (가장 간단)
   - 파일: `src/ui/task_widget.py` 249번 줄
   - 변경: `👁️` → `🔍`

2. **다크모드 메뉴바 스타일 추가** ⭐ (UI 개선)
   - 파일: `src/utils/theme_manager.py`
   - 다크테마 스타일시트에 메뉴바 CSS 추가

3. **백업/복원 기능 활성화** ⭐⭐ (핵심 기능)
   - 파일: `src/ui/main_window.py`
   - 주석 처리된 백업 관련 코드들 활성화
   - 백업 메뉴 및 단축키(Ctrl+B) 복원

4. **마감일 설정 버튼 시인성 개선** ⭐ (UI 개선)
   - 파일: `src/ui/task_widget.py`
   - 액션 컬럼 너비 조정 및 버튼 크기 증가
   - 버튼 간격 및 시각적 구분 개선

### 2단계 (주요 기능 개선 - 3-4일)
5. **마감일 더블클릭 수정 기능 구현** ⭐⭐
   - 파일: `src/ui/task_widget.py`
   - 마감일 컬럼 더블클릭 이벤트 핸들러 추가
   - 기존 `DueDateDialog` 활용

6. **시간 표시 형식 통일** ⭐
   - 전체 프로젝트 시간 표시 형식 점검 및 수정
   - 초 단위 제거, 일관된 포맷 적용

### 3단계 (추가 개선사항 - 1주일)
7. **사용자 경험 개선**
   - 마감일 편집 관련 키보드 단축키 추가
   - 더블클릭 피드백 개선
   - 오류 메시지 개선

---

## 🧪 테스트 계획

### 기능 테스트
1. **마감일 더블클릭 수정**
   - 다양한 날짜/시간 설정 시나리오 테스트
   - 유효하지 않은 입력 처리 테스트
   - 기존 마감일 수정 테스트

2. **다크모드 UI 테스트**
   - 모든 메뉴 항목 시인성 확인
   - 라이트/다크 모드 전환 테스트
   - 서브메뉴 스타일 확인

3. **아이콘 변경 테스트**
   - 다양한 해상도에서 아이콘 표시 확인
   - 테마별 아이콘 가독성 테스트

4. **백업/복원 기능 테스트**
   - 백업 생성 및 저장 위치 확인
   - 백업 파일로부터 데이터 복원 테스트
   - 백업 파일 목록 관리 기능 테스트
   - 백업 과정에서 오류 처리 테스트

5. **마감일 버튼 시인성 테스트**
   - 다양한 해상도에서 액션 버튼 가시성 확인
   - 버튼 크기 및 간격 적절성 테스트
   - 툴팁 표시 및 사용자 인터페이스 개선 확인

### 사용성 테스트
- 실제 사용자 시나리오 기반 테스트
- 키보드 네비게이션 테스트
- 접근성 확인

---

## 📊 예상 작업량 및 리소스

| 작업 항목 | 예상 시간 | 난이도 | 우선순위 |
|-----------|----------|---------|----------|
| 아이콘 변경 | 0.5시간 | 쉬움 | 높음 |
| 다크모드 메뉴바 | 2시간 | 보통 | 높음 |
| 백업 기능 활성화 | 1.5시간 | 쉬움 | 높음 |
| 마감일 버튼 시인성 | 1시간 | 쉬움 | 높음 |
| 마감일 더블클릭 | 4시간 | 보통 | 높음 |
| 시간 형식 통일 | 2시간 | 쉬움 | 중간 |
| 테스트 및 QA | 4시간 | 보통 | 높음 |
| **총 예상 시간** | **15시간** | | |

---

## 🔄 배포 계획

### v0.3.1 릴리즈
- **목표 날짜:** 2025년 1월 중순
- **포함 기능:** 위 6가지 문제점 모두 해결
- **릴리즈 노트:** 사용자 피드백 반영 개선사항 강조

### 이후 버전 계획
- **v0.3.2:** 추가 사용자 피드백 반영
- **v0.4.0:** 새로운 주요 기능 추가 (백업 기능 완성, 축하 효과 등)

---

## 📝 참고사항

### 코드 품질 유지
- 기존 코드 스타일 준수
- 적절한 주석 및 문서화
- 타입 힌트 활용

### 호환성 고려
- 기존 데이터베이스 구조 유지
- 사용자 설정 파일 호환성
- 이전 버전과의 기능 호환성

### 사용자 피드백 수집
- 베타 테스터를 통한 사전 검증
- 수정 후 사용자 만족도 조사
- 추가 개선점 수집 